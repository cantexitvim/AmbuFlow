<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register & Login</title>

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Boxicons -->
    <link
      href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="src/css/login.css" />

    <!-- EmailJS -->
    <script
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
      type="text/javascript"
    ></script>
  </head>

  <body>
    <!-- Login Form -->
    <div class="wrapper">
      <div class="form-box login" style="padding-top: 50px">
        <h2 class="title animation" style="margin-bottom: 30px">Login</h2>
        <form id="loginForm">
          <div class="input-box animation" style="--i: 1; --j: 22">
            <input type="text" id="loginUsername" required />
            <label>Username</label>
            <i class="bx bxs-user"></i>
          </div>
          <div class="input-box animation" style="--i: 2; --j: 23">
            <input type="password" id="loginPassword" required />
            <label>Password</label>
            <i class="bx bxs-lock-alt"></i>
            <i
              class="fas fa-eye toggle-password"
              id="togglePassword"
              onclick="togglePassword()"
            ></i>
          </div>
          <button type="submit" class="btn animation" style="--i: 3; --j: 24">
            Login
          </button>
          <div class="linkTxt animation" style="--i: 5; --j: 25">
            <p>
              Don't have an account?
              <a href="#" class="register-link">Sign Up</a>
            </p>
          </div>
        </form>
      </div>
      <span class="rotate-bg"></span>
      <span class="rotate-bg2"></span>
    </div>

    <script>
      // Toggle password visibility
      function togglePassword() {
        const password = document.getElementById("loginPassword");
        const togglePassword = document.getElementById("togglePassword");

        if (password.type === "password") {
          password.type = "text";
          togglePassword.classList.add("fa-eye-slash");
          togglePassword.classList.remove("fa-eye");
        } else {
          password.type = "password";
          togglePassword.classList.add("fa-eye");
          togglePassword.classList.remove("fa-eye-slash");
        }
      }

      // Handle form submission
      document
        .getElementById("loginForm")
        .addEventListener("submit", function (event) {
          event.preventDefault(); // Prevent form submission

          const loginUsername = document.getElementById("loginUsername").value;
          const loginPassword = document.getElementById("loginPassword").value;

          // Retrieve stored user data (mocked with localStorage for demonstration)
          const storedUser = JSON.parse(localStorage.getItem("user"));

          // Validate credentials
          if (
            storedUser &&
            loginUsername === storedUser.username &&
            loginPassword === storedUser.password
          ) {
            alert("Login successful! Redirecting to home page...");
            localStorage.setItem("currentUser", loginUsername);
            window.location.href = "index.html"; // Redirect to home page
          } else {
            alert("Invalid username or password.");
          }
        });

      // Handle registration link click
      document
        .querySelector(".register-link")
        .addEventListener("click", function () {
          document.querySelector(".form-box.login").style.display = "none";
          document.querySelector(".form-box.register").style.display = "block";
        });

      // Handle login link click
      document
        .querySelector(".login-link")
        .addEventListener("click", function () {
          document.querySelector(".form-box.register").style.display = "none";
          document.querySelector(".form-box.login").style.display = "block";
        });
    </script>
  </body>
</html>
